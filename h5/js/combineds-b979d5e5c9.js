var H5ComponentBase=function(e,t){var t=t||{},a=" h5_component_"+t.type,n=("h5_c_"+Math.random()).replace(".","_"),o=$("<div class='h5_component "+a+"  h5_component_name_"+e+"' id='"+n+"'>");return t.text&&o.text(t.text),t.width&&o.width(t.width/2),t.height&&o.height(t.height/2),t.css&&o.css(t.css),t.bg&&o.css("background-image","url("+t.bg+")"),t.center&&o.css({left:"50%",marginLeft:t.width/4*-1+"px"}),"function"==typeof t.onclick&&o.on("click",t.onclick),o.on("afterLoad",function(){setTimeout(function(){return o.addClass(a+"_load").removeClass(a+"_leave"),t.animationIn&&o.animate(t.animationIn),!1},t.delay||0)}),o.on("onLeave",function(){return o.addClass(a+"_leave").removeClass(a+"_load"),t.animationOut&&o.animate(t.animationOut),!1}),o},H5ComponentBar_v=function(e,t){var a=new H5ComponentBase(e,t),n=t.height;return $.each(t.data,function(e,t){var o=$("<div class='line'>"),i=$("<div class='name'>"),r=$("<div class='rate'>"),s=$("<div class='per'>"),c="";t[2]&&(c='style="background-color:'+t[2]+' "'),o.css("padding-top",(1-t[1])*n/4),i.text(t[0]);var d=100*t[1]+"%",l=100*t[1]*.5+"%";r.html("<div class='bg'"+c+"></div>"),r.css("height",l),s.text(d),o.append(s).append(r).append(i),a.append(o)}),a},H5ComponentBar=function(e,t){var a=new H5ComponentBase(e,t);return $.each(t.data,function(e,t){var n=$("<div class='line'>"),o=$("<div class='name'>"),i=$("<div class='rate'>"),r=$("<div class='per'>"),s="";t[2]&&(s='style="background-color:'+t[2]+' "'),o.text(t[0]);var c=100*t[1]+"%",d=100*t[1]*.5+"%";i.html("<div class='bg'"+s+"></div>"),i.css("width",d),r.text(c),n.append(o).append(i).append(r),a.append(n)}),a},H5ComponentPie=function(e,t){var a=new H5ComponentBase(e,t),n=t.width,o=t.height,i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",2),a.append(i);for(var c=1.5*Math.PI,d=2*Math.PI,l=["red","green","grey","blue","yellow"],h=0,v=0;v<r;v++){var f=t.data[v],p=n/2;s.strokeStyle="#eee",s.fillStyle="#eee",s.beginPath(),eAngle=c+d*f[1],s.moveTo(p,p),s.arc(p,p,p,c,eAngle),s.fillStyle=f[2]||l.pop(),s.fill(),s.stroke(),c=eAngle;var g=$("<div class='text'>");g.text(f[0]),a.append(g);var m=$("<div class='rate'>");m.text(100*f[1]+"%"),g.append(m),h+=2*Math.PI*f[1]/2;var u=p+p*Math.cos(h-.5*Math.PI),w=p+p*Math.sin(h-.5*Math.PI);s.beginPath(),s.strokeStyle="black",s.stroke(),u>n/2?g.css("left",u/2+10):g.css("right",(n-u)/2+10),w>o/2?g.css("top",w/2+10):g.css("bottom",(o-w)/2+10),h+=2*Math.PI*f[1]/2}var i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",3),a.append(i);var p=n/2;s.strokeStyle="#eee",s.fillStyle="#eee";var x=function(e){s.clearRect(0,0,n,o),s.beginPath(),s.moveTo(p,p),c=1.5*Math.PI,e<=0?s.arc(p,p,p,0,2*Math.PI):s.arc(p,p,p,c,c+2*Math.PI*e,!0),s.fill(),s.stroke()};return x(0),a.on("afterLoad",function(){for(var e=0,t=0;t<100;t++)setTimeout(function(){e+=.01,x(e)},10*t+500)}),a.on("onLeave",function(){for(var e=1,t=0;t<100;t++)setTimeout(function(){e-=.01,x(e)},10*t)}),a},H5ComponentPoint=function(e,t){var a=new H5ComponentBase(e,t),n=t.data[0][1];return $.each(t.data,function(e,t){var o=$('<div class="point point_'+e+' ">');a.append(o),o.css("z-index",3);var i=t[1]/n*100+"%",r=$('<div class="name">'+t[0]+"</div>"),s=$('<div class="per">'+100*t[1]+"%</div>");r.append(s),o.append(r),o.width(i).height(i),t[2]&&o.css("background-color",t[2]),void 0!==t[3]&&void 0!==t[4]&&o.css("left",t[3]).css("top",t[4])}),$.each(t.data,function(e,t){var o=$('<div class="point point_'+e+' ">');a.append(o);var i=t[1]/n*100+"%";o.width(i).height(i),t[2]&&(o.css("background-color",t[2]),o.addClass("shine")),void 0!==t[3]&&void 0!==t[4]&&o.css("left",t[3]).css("top",t[4])}),a},H5ComponentPolyline=function(e,t){var a=new Array,n=new H5ComponentBase(e,t),o=t.width,i=t.height,r=document.createElement("canvas"),s=r.getContext("2d");r.width=s.width=o,r.height=s.height=i,n.append(r);var c=10;s.beginPath(),s.lineWidth=1,s.strokeStyle="#AAAAA";for(var d=0;d<c+1;d++){var l=i/c*d;s.moveTo(0,l),s.lineTo(o,l)}c=t.data.length+1;for(var d=0;d<c+1;d++){var h=o/c*d;s.moveTo(h,0),s.lineTo(h,i)}s.stroke();var r=document.createElement("canvas"),s=r.getContext("2d");r.width=s.width=o,r.height=s.height=i,n.append(r);var v=function(e){s.clearRect(0,0,o,i),s.beginPath(),s.lineWidth=3,s.strokeStyle="#ff8878",c=t.data.length+1;for(var r in t.data){s.beginPath();var d=t.data[r];if(h=o/c*r+o/c,v=i*(1-d[1]*e),s.arc(h,v,5,0,2*Math.PI),s.stroke(),t.data&&a[r]!==r){a[r]=r;var l=$("<div class='text'>");l.text(t.data[r][0]),l.css("width",o/c/2).css("left",h/2-o/c/4).css("text-align","center"),n.append(l)}}s.moveTo(o/c,i*(1-t.data[0][1]*e));for(var r in t.data){var d=t.data[r],h=o/c*r+o/c,v=i*(1-d[1]*e);s.lineTo(h,v)}s.stroke(),s.lineTo(h,i),s.lineTo(o/c,i),s.fillStyle="rgba(255,136,120,0.2)",s.fill();for(var r in t.data){var d=t.data[r],h=o/c*r+o/c,v=i*(1-d[1]*e);s.fillStyle="black",s.font="25px  Arial",s.fillText(100*d[1]+"%",h-10,v-10)}};return n.on("afterLoad",function(){for(var e=0,t=0;t<100;t++)setTimeout(function(){e+=.01,v(e)},10*t+500)}),n.on("onLeave",function(){for(var e=1,t=0;t<100;t++)setTimeout(function(){e-=.01,v(e)},10*t)}),n},H5ComponentRadar=function(e,t){var a=new H5ComponentBase(e,t),n=t.width,o=t.height,i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,a.append(i);for(var c=n/2,d=!1,l=10;l>0;l--){s.beginPath();for(var h=0;h<r;h++){var v=2*Math.PI/360*(360/r)*h,f=c+c*Math.sin(v)*(l/10),p=c+c*Math.cos(v)*(l/10);s.lineTo(f,p)}s.closePath(),s.stroke(),d=!d,s.fillStyle=d?"#99c0ff":"white",s.fill()}for(var h=0;h<r;h++){var v=2*Math.PI/360*(360/r)*h,f=c+c*Math.sin(v),p=c+c*Math.cos(v);s.beginPath(),s.moveTo(c,c),s.lineTo(f,p),s.strokeStyle="#e0e0e0",s.stroke();var g=$("<div class='text'>");g.text(t.data[h][0]),a.append(g),g.css("transition","all 1s "+.1*h+"s"),f>n/2?g.css("left",f/2+5):g.css("right",(n-f)/2+5),p>o/2?g.css("top",p/2+5):g.css("bottom",(o-p)/2+5),g.css("opacity",0)}var i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,a.append(i);var m=function(e){e>=1&&$(".h5_component_radar").find(".text").css("opacity",1),e<1&&$(".h5_component_radar").find(".text").css("opacity",0),s.clearRect(0,0,n,o),s.beginPath();for(var a=0;a<r;a++){var i=t.data[a][1]*e,d=2*Math.PI/360*(360/r)*a,l=c+c*Math.sin(d)*i,h=c+c*Math.cos(d)*i;s.strokeStyle="#ff7676",s.lineTo(l,h)}s.closePath(),s.fillStyle="#ff7676",s.fill(),s.stroke()};return a.on("afterLoad",function(){for(var e=0,t=0;t<100;t++)setTimeout(function(){e+=.01,m(e)},10*t+500)}),a.on("onLeave",function(){for(var e=1,t=0;t<100;t++)setTimeout(function(){e-=.01,m(e)},10*t)}),a},H5ComponentRing=function(e,t){var a=new H5ComponentBase(e,t),n=t.width,o=t.height,i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",1),a.append(i);var c=n/2;s.strokeStyle="#eee",s.fillStyle="#eee",s.beginPath(),s.arc(c,c,c,0,2*Math.PI),s.fill(),s.stroke();var i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",2),a.append(i);for(var d=1.5*Math.PI,l=2*Math.PI,h=0;h<r;h++){item=t.data[h];var c=n/2;s.strokeStyle="#eee",s.fillStyle="#eee",s.beginPath(),eAngle=d+l*item[1],s.moveTo(c,c),s.arc(c,c,c,d,eAngle),s.fillStyle="pink",s.fill(),s.stroke(),d=eAngle}var i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",5),a.append(i);var c=n/2;s.strokeStyle="#eee",s.fillStyle="white",s.beginPath(),s.arc(c,c,.8*c,0,2*Math.PI),s.fill(),s.stroke();var i=document.createElement("canvas"),s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",1e3),$(i).css("left",-n/10),$(i).addClass("tran"),a.append(i);var c=n/2;s.font="35px Georgia",s.fillText(t.desc,c,c);var i=document.createElement("canvas"),r=t.data.length,s=i.getContext("2d");i.width=s.width=n,i.height=s.height=o,$(i).css("z-index",3),a.append(i);var c=n/2;s.strokeStyle="#eee",s.fillStyle="#eee";var v=function(e){s.clearRect(0,0,n,o),s.beginPath(),s.moveTo(c,c),d=1.5*Math.PI,e<=0?s.arc(c,c,c,0,2*Math.PI):s.arc(c,c,c,d,d+2*Math.PI*e,!0),s.fill(),s.stroke()};return v(0),a.on("afterLoad",function(){for(var e=0,t=0;t<100;t++)setTimeout(function(){e+=.01,v(e)},10*t+500)}),a.on("onLeave",function(){for(var e=1,t=0;t<100;t++)setTimeout(function(){e-=.01,v(e)},10*t)}),a};